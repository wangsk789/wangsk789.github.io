<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.145.0">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>动态组件扩展 &middot; 浮云小站</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://wangsk789.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://wangsk789.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://wangsk789.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://wangsk789.github.io/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://wangsk789.github.io/"><h1>浮云小站</h1></a>
      <p class="lead">
       App Inventor 2相关的扩展、教程、代码等. 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        
        
      </ul>
    </nav>
	
	<div >
	<form action="https://wangsk789.github.io/search">
            <input id="search-query" name="s" placeholder="输入关键词..." style="-webkit-appearance: none; display: block;        width: 80%;        padding: 8px;    margin-bottom: 20px;        font-size: 1rem;        line-height: 1.5;        border: 1px solid #ced4da;        border-radius: .25rem; "/>
	</form>
    </div>
	
		
    <p>Copyright (c) 2025, Kevinkun</p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>动态组件扩展</h1>
  <time datetime=2022-11-20T09:03:20-0800 class="post-date">2022-11-20</time>
  <p>在应用运行期间，使用代码动态的生成可视组件并设置属性，不需要提前在设计界面拖入很多组件。</p>
<h1 id="credit">Credit:</h1>
<p>This extension is inspired on the fabulous work of Yusuf Cihan: <a href="https://github.com/ysfchn/DynamicComponents-AI2">GitHub - ysfchn/DynamicComponents-AI2</a></p>
<h1 id="所有功能块">所有功能块</h1>
<h2 id="创建组件">创建组件</h2>
<p><img src="./assets/20250303_115251.png" alt="20250303_115251.png"></p>
<p>component：是要创建的组件的类型（文本字串），这里推荐使用选项下拉框输入.</p>
<p>in：是新组件的父容器，需要是个容器类组件。</p>
<p><strong>Known issue:</strong></p>
<p>The dynamic component will not be listed by &ldquo;<em>Every Component</em>&rdquo;, which is newly added in MIT AI2 2.66.<br>
But you can use the ListComponents function of this extension.</p>
<h2 id="组件列表">组件列表</h2>
<p><img src="./assets/20250303_115300.png" alt="20250303_115300.png"></p>
<p>可以返回同类型的组件列表<br>
recursive: boolean. If true, it will return all components with same type. If false, it will return only the direct children.</p>
<h2 id="移除组件">移除组件</h2>
<p><img src="./assets/20250303_115308.png" alt="20250303_115308.png"></p>
<p>component：要删除的组件，而不是他的类型。如果他是容器类，他的所有子组件也会被移除。</p>
<h2 id="设置属性">设置属性</h2>
<p>这个块的大部分功能可以使用内置的任意组件块来实现。<br>
<img src="./assets/20250303_115316.png" alt="20250303_115316.png"></p>
<p>component：要设置属性的组件</p>
<p>property：要设置的组件的属性。可以是以下3种情况:</p>
<ol>
<li>可以是组件的自带的属性，必须是英文（推荐使用下拉框输入）；</li>
<li>可以是“index”，用来设置组件的排列顺序；</li>
<li>可以是其他自定义的属性，比如id，parent之类的任意文本，中英皆可。相当于附在组件上的一个字典（键值对）。</li>
</ol>
<p>value：新的属性值</p>
<h2 id="获取属性">获取属性</h2>
<p><img src="./assets/20250303_115323.png" alt="20250303_115323.png"></p>
<p>这个块的大部分功能可以使用内置的任意组件块来实现。</p>
<h2 id="获取子组件列表和父组件">获取子组件列表和父组件</h2>
<p><img src="./assets/20250303_115332.png" alt="20250303_115332.png"></p>
<p><del>只适用于获取动态生成的子组件列表或他的父组件</del></p>
<p>从8.4版本以后，可以支持所有组件（动态的或者手动添加的）获取子组件和父组件。</p>
<p>已知问题：在伴侣中获取Screen的子部件会返回错误的列表。apk中没有问题。</p>
<h2 id="从模板创建">从模板创建</h2>
<p><img src="./assets/20250303_115346.png" alt="20250303_115346.png"></p>
<p>返回值是创建的最外层的容器组件</p>
<p>template: json字符串，创建一组组件需要的模板文本。</p>
<p>in: 容器组件</p>
<p>values: 列表。传入组件模板的值。</p>
<p>可以根据以下格式手动编写，或者在MIT服务器上的设计界面手动添加需要的界面（一条记录），根据需要设置相应的组件属性。选中最外层组件，键盘上按下Ctrl + C，然后在任何文本编辑器里面按键盘上的Ctrl+V，就可以得到模板了</p>
<p><img src="./assets/20250303_115406.png" alt="20250303_115406.png"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;$components&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Name&#34;</span>: <span style="color:#e6db74">&#34;VerticalArrangement1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Type&#34;</span>: <span style="color:#e6db74">&#34;VerticalArrangement&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Version&#34;</span>: <span style="color:#e6db74">&#34;4&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Uuid&#34;</span>: <span style="color:#e6db74">&#34;-444056707&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Components&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;$Name&#34;</span>: <span style="color:#e6db74">&#34;Button2&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;$Type&#34;</span>: <span style="color:#e6db74">&#34;Button&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;$Version&#34;</span>: <span style="color:#e6db74">&#34;7&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Text&#34;</span>: <span style="color:#e6db74">&#34;Text for Button2&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;TextColor&#34;</span>: <span style="color:#e6db74">&#34;&amp;HFFFF00FF&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Uuid&#34;</span>: <span style="color:#e6db74">&#34;12991510&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;$blocks&#34;</span>: []
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>以下模板中的$Name,$Version,Uuid,$blocks几个键是从mit自动转换来的，模板中并不需要。你可以把它们删掉，也可以保留，扩展会自动忽略他们。</p>
<p>$Components 和$Type是必须保留的。</p>
<p>如果你想在运行时替换模板中的属性值，可以像下图这样，替换成{1}, {2}, {3}&hellip;这样。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;$components&#34;</span>: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Name&#34;</span>: <span style="color:#e6db74">&#34;VerticalArrangement1&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Type&#34;</span>: <span style="color:#e6db74">&#34;VerticalArrangement&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Version&#34;</span>: <span style="color:#e6db74">&#34;4&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;Uuid&#34;</span>: <span style="color:#e6db74">&#34;-444056707&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&#34;$Components&#34;</span>: [
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;$Name&#34;</span>: <span style="color:#e6db74">&#34;Button2&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;$Type&#34;</span>: <span style="color:#e6db74">&#34;Button&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;$Version&#34;</span>: <span style="color:#e6db74">&#34;7&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Text&#34;</span>: <span style="color:#e6db74">&#34;{1}&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;TextColor&#34;</span>: <span style="color:#e6db74">&#34;{2}&#34;</span>,
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&#34;Uuid&#34;</span>: <span style="color:#e6db74">&#34;12991510&#34;</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      ]
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;$blocks&#34;</span>: []
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>然后这样使用模板,新生成的按钮就可以有新的文本和颜色了：</p>
<p><img src="./assets/20250303_115422.png" alt="20250303_115422.png"></p>
<h2 id="添加删除点击事件">添加删除点击事件</h2>
<p><img src="./assets/20250303_115429.png" alt="20250303_115429.png"></p>
<p>为新建组件添加或取消点击事件。</p>
<p>listener: 过程名。需要手动创建一个过程名，包含一个参数，该参数即为被点击的组件。</p>
<p><img src="./assets/20250303_115449.png" alt="20250303_115449.png"></p>
<h1 id="下载地址">下载地址：</h1>
<p>扩展aix：<br>
<a href="./assets/20250303_115647.aix">cn.kevinkun.CompCreator-V8.9.aix</a></p>
<p><a href="./assets/cn.kevinkun.CompCreator-v8.10.aix">cn.kevinkun.CompCreator-V8.10-bugfix.aix</a></p>
<p>示例aia:<br>
<a href="./assets/20250303_115726.aia">compcreator-listview-by-template.aia</a></p>
<p>更多示例及用法，可以<a href="https://community.appinventor.mit.edu/t/free-compcreator-create-component-dynamically/49724">参考这里</a></p>
</div>

	<div id="vcomments"></div>
	<script src='../../Valine.min.js'></script>
	<script src='../../myjs.js'></script>
    </main>

    
      
    
  </body>
</html>
